{"remainingRequest":"C:\\Users\\徐可心\\Desktop\\S1211-设计\\项目源码\\book-web\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\徐可心\\Desktop\\S1211-设计\\项目源码\\book-web\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\徐可心\\Desktop\\S1211-设计\\项目源码\\book-web\\src\\store\\modules\\user.js","dependencies":[{"path":"C:\\Users\\徐可心\\Desktop\\S1211-设计\\项目源码\\book-web\\src\\store\\modules\\user.js","mtime":1680829718000},{"path":"C:\\Users\\徐可心\\Desktop\\S1211-设计\\项目源码\\book-web\\babel.config.js","mtime":1667985372000},{"path":"C:\\Users\\徐可心\\Desktop\\S1211-设计\\项目源码\\book-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\徐可心\\Desktop\\S1211-设计\\项目源码\\book-web\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\徐可心\\Desktop\\S1211-设计\\项目源码\\book-web\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyIpOwp2YXIgX2xvZ2luID0gcmVxdWlyZSgiQC9hcGkvbG9naW4iKTsKdmFyIF9hdXRoID0gcmVxdWlyZSgiQC91dGlscy9hdXRoIik7CnZhciB1c2VyID0gewogIHN0YXRlOiB7CiAgICB0b2tlbjogKDAsIF9hdXRoLmdldFRva2VuKSgpLAogICAgbmFtZTogJycsCiAgICBhdmF0YXI6ICcnLAogICAgcm9sZXM6IFtdLAogICAgcGVybWlzc2lvbnM6IFtdCiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIFNFVF9UT0tFTjogZnVuY3Rpb24gU0VUX1RPS0VOKHN0YXRlLCB0b2tlbikgewogICAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogICAgfSwKICAgIFNFVF9OQU1FOiBmdW5jdGlvbiBTRVRfTkFNRShzdGF0ZSwgbmFtZSkgewogICAgICBzdGF0ZS5uYW1lID0gbmFtZTsKICAgIH0sCiAgICBTRVRfQVZBVEFSOiBmdW5jdGlvbiBTRVRfQVZBVEFSKHN0YXRlLCBhdmF0YXIpIHsKICAgICAgc3RhdGUuYXZhdGFyID0gYXZhdGFyOwogICAgfSwKICAgIFNFVF9ST0xFUzogZnVuY3Rpb24gU0VUX1JPTEVTKHN0YXRlLCByb2xlcykgewogICAgICBzdGF0ZS5yb2xlcyA9IHJvbGVzOwogICAgfSwKICAgIFNFVF9QRVJNSVNTSU9OUzogZnVuY3Rpb24gU0VUX1BFUk1JU1NJT05TKHN0YXRlLCBwZXJtaXNzaW9ucykgewogICAgICBzdGF0ZS5wZXJtaXNzaW9ucyA9IHBlcm1pc3Npb25zOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgLy8g55m75b2VCiAgICBMb2dpbjogZnVuY3Rpb24gTG9naW4oX3JlZiwgdXNlckluZm8pIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICB2YXIgdXNlcm5hbWUgPSB1c2VySW5mby51c2VybmFtZS50cmltKCk7CiAgICAgIHZhciBwYXNzd29yZCA9IHVzZXJJbmZvLnBhc3N3b3JkOwogICAgICB2YXIgY29kZSA9IHVzZXJJbmZvLmNvZGU7CiAgICAgIHZhciB1dWlkID0gdXNlckluZm8udXVpZDsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAoMCwgX2xvZ2luLmxvZ2luKSh1c2VybmFtZSwgcGFzc3dvcmQsIGNvZGUsIHV1aWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgKDAsIF9hdXRoLnNldFRva2VuKShyZXMudG9rZW4pOwogICAgICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCByZXMudG9rZW4pOwogICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g6I635Y+W55So5oi35L+h5oGvCiAgICBHZXRJbmZvOiBmdW5jdGlvbiBHZXRJbmZvKF9yZWYyKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQsCiAgICAgICAgc3RhdGUgPSBfcmVmMi5zdGF0ZTsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAoMCwgX2xvZ2luLmdldEluZm8pKCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICB2YXIgdXNlciA9IHJlcy51c2VyOwogICAgICAgICAgdmFyIGF2YXRhciA9IHVzZXIuYXZhdGFyID09ICIiIHx8IHVzZXIuYXZhdGFyID09IG51bGwgPyByZXF1aXJlKCJAL2Fzc2V0cy9pbWFnZXMvaW1nLmpwZyIpIDogcHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX0FQSSArIHVzZXIuYXZhdGFyOwogICAgICAgICAgaWYgKHJlcy5yb2xlcyAmJiByZXMucm9sZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAvLyDpqozor4Hov5Tlm57nmoRyb2xlc+aYr+WQpuaYr+S4gOS4qumdnuepuuaVsOe7hAogICAgICAgICAgICBjb21taXQoJ1NFVF9ST0xFUycsIHJlcy5yb2xlcyk7CiAgICAgICAgICAgIGNvbW1pdCgnU0VUX1BFUk1JU1NJT05TJywgcmVzLnBlcm1pc3Npb25zKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbW1pdCgnU0VUX1JPTEVTJywgWydST0xFX0RFRkFVTFQnXSk7CiAgICAgICAgICB9CiAgICAgICAgICBjb21taXQoJ1NFVF9OQU1FJywgdXNlci51c2VyTmFtZSk7CiAgICAgICAgICBjb21taXQoJ1NFVF9BVkFUQVInLCBhdmF0YXIpOwogICAgICAgICAgcmVzb2x2ZShyZXMpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g6YCA5Ye657O757ufCiAgICBMb2dPdXQ6IGZ1bmN0aW9uIExvZ091dChfcmVmMykgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjMuc3RhdGU7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgKDAsIF9sb2dpbi5sb2dvdXQpKHN0YXRlLnRva2VuKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGNvbW1pdCgnU0VUX1RPS0VOJywgJycpOwogICAgICAgICAgY29tbWl0KCdTRVRfUk9MRVMnLCBbXSk7CiAgICAgICAgICBjb21taXQoJ1NFVF9QRVJNSVNTSU9OUycsIFtdKTsKICAgICAgICAgICgwLCBfYXV0aC5yZW1vdmVUb2tlbikoKTsKICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWJjeerryDnmbvlh7oKICAgIEZlZExvZ091dDogZnVuY3Rpb24gRmVkTG9nT3V0KF9yZWY0KSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmNC5jb21taXQ7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgIGNvbW1pdCgnU0VUX1RPS0VOJywgJycpOwogICAgICAgICgwLCBfYXV0aC5yZW1vdmVUb2tlbikoKTsKICAgICAgICByZXNvbHZlKCk7CiAgICAgIH0pOwogICAgfQogIH0KfTsKdmFyIF9kZWZhdWx0ID0gdXNlcjsKZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7"},{"version":3,"names":["user","state","token","getToken","name","avatar","roles","permissions","mutations","SET_TOKEN","SET_NAME","SET_AVATAR","SET_ROLES","SET_PERMISSIONS","actions","Login","userInfo","commit","username","trim","password","code","uuid","Promise","resolve","reject","login","then","res","setToken","catch","error","GetInfo","getInfo","require","process","env","VUE_APP_BASE_API","length","userName","LogOut","logout","removeToken","FedLogOut"],"sources":["C:/Users/徐可心/Desktop/S1211-设计/项目源码/book-web/src/store/modules/user.js"],"sourcesContent":["import { login, logout, getInfo } from '@/api/login'\nimport { getToken, setToken, removeToken } from '@/utils/auth'\n\nconst user = {\n  state: {\n    token: getToken(),\n    name: '',\n    avatar: '',\n    roles: [],\n    permissions: []\n  },\n\n  mutations: {\n    SET_TOKEN: (state, token) => {\n      state.token = token\n    },\n    SET_NAME: (state, name) => {\n      state.name = name\n    },\n    SET_AVATAR: (state, avatar) => {\n      state.avatar = avatar\n    },\n    SET_ROLES: (state, roles) => {\n      state.roles = roles\n    },\n    SET_PERMISSIONS: (state, permissions) => {\n      state.permissions = permissions\n    }\n  },\n\n  actions: {\n    // 登录\n    Login({ commit }, userInfo) {\n      const username = userInfo.username.trim()\n      const password = userInfo.password\n      const code = userInfo.code\n      const uuid = userInfo.uuid\n      return new Promise((resolve, reject) => {\n        login(username, password, code, uuid).then(res => {\n          setToken(res.token)\n          commit('SET_TOKEN', res.token)\n          resolve()\n        }).catch(error => {\n          reject(error)\n        })\n      })\n    },\n\n    // 获取用户信息\n    GetInfo({ commit, state }) {\n      return new Promise((resolve, reject) => {\n        getInfo().then(res => {\n          const user = res.user\n          const avatar = (user.avatar == \"\" || user.avatar == null) ? require(\"@/assets/images/img.jpg\") : process.env.VUE_APP_BASE_API + user.avatar;\n          if (res.roles && res.roles.length > 0) { // 验证返回的roles是否是一个非空数组\n            commit('SET_ROLES', res.roles)\n            commit('SET_PERMISSIONS', res.permissions)\n          } else {\n            commit('SET_ROLES', ['ROLE_DEFAULT'])\n          }\n          commit('SET_NAME', user.userName)\n          commit('SET_AVATAR', avatar)\n          resolve(res)\n        }).catch(error => {\n          reject(error)\n        })\n      })\n    },\n\n    // 退出系统\n    LogOut({ commit, state }) {\n      return new Promise((resolve, reject) => {\n        logout(state.token).then(() => {\n          commit('SET_TOKEN', '')\n          commit('SET_ROLES', [])\n          commit('SET_PERMISSIONS', [])\n          removeToken()\n          resolve()\n        }).catch(error => {\n          reject(error)\n        })\n      })\n    },\n\n    // 前端 登出\n    FedLogOut({ commit }) {\n      return new Promise(resolve => {\n        commit('SET_TOKEN', '')\n        removeToken()\n        resolve()\n      })\n    }\n  }\n}\n\nexport default user\n"],"mappings":"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"}]}